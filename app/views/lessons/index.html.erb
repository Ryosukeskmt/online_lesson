<% if user_signed_in? %> <!-- ユーザーがログインしているか調べる -->
  <!-- ユーザーがログインしていた時の処理 -->
  <h2> 現在 <%= current_user.name %> さんがログインしています </h2>
  <h4> メールアドレス： <%= current_user.email %> </h4>
  <%= link_to "ログアウト", destroy_user_session_path, method: :delete %> <!-- ログアウトをする -->
  <% if flash[:notice] %>
    <div class="alert alert-danger"><%= flash[:notice] %></div>
  <% end %>
  <h1 class="center">レッスン一覧</h1>
  <div class="float-right link-layout">
    <%= link_to '新規作成', new_lesson_path, class: 'btn btn-outline-dark' %>
  </div>  

  <table class="table table-striped table-bordered">
    <thead>
        <tr>
          <th>学年</th>
          <th>教科</th>
          <th>タイトル</th>
          <th>作成者</th>
          <th>作成日</th>
          <th>更新日</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @lessons.each do |lesson| %>
          <tr>
            <td><%= lesson.grade %></td>
            <td><%= lesson.subject %></td>
            <td><%= lesson.title %></td>
            <td><%= lesson.teacher_name %> 先生</td>
            <td><%= lesson.created_at.to_s(:datetime_jp) %></td>
            <td><%= lesson.updated_at.to_s(:datetime_jp) %></td>
            <td><%= link_to '勉強する', lesson, class: 'btn btn-primary' %></td>
          </tr>
        <% end %>
      </tbody>
  </table>

  <%= paginate @lessons , theme: 'twitter-bootstrap-4' %>
<% else %>
  <!-- ユーザーがログインしていなかった時の処理 -->
  <h2> 現在ログインしていません </h2>
  <%= link_to "ログイン", new_user_session_path, class: 'post' %> <!-- ログイン画面に移行する -->
  <%= link_to "新規登録", new_user_registration_path, class: 'post' %> <!-- 新規登録画面に移行する -->
<% end %>